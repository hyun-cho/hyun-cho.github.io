# 메모리 관리

## 메모리 생존주기

1. 필요할 때 할당한다.
1. 사용한다. (읽기, 쓰기)
1. 필요없어지면 해제한다.

- 두번째 부분은 모든 프로그래밍 언어에서 명시적이지만, 첫 번째 세 번째 항목은 저수준 언어에서만 명시적이다.

## 가비지 콜렉션 (Garbage Collection)

- 핵심 개념은 `참조`이다.
- A라는 메모리를 통해 B라는 메모리에 접근할 수 있다면 "B는 A에 참조된다"라고 한다.

## 참조-세기(Reference-counting) 가비지 콜렉션

- 참조-세기 알고리즘은 가장 소박한 알고리즘
- 더이상 필요없는 오브젝트 = 어던 다른 오브젝트로 참조하지 않는 오브젝트 = 가비지

- 한계 
  - 순환 참조가 일어나면 한계가 온다.
  - 메모리 누수의 흔한 원인

## 표시하고-쓸기(Mark-and-sweep) 가비지 콜렉션

- 더 이상 필요없는 오브젝트 = 닿을 수 없는 오브젝트 = 가비지
- roots라는 오브젝트의 집합을 가지고 있다. (전역 변수들)
- roots가 참조하는 오브젝트가 참조하는 오브젝트들... 을 닿을 수 있는 오브젝트라고 표시
- 그리고 닿을 수 있는 오브젝트가 아닌 오브젝트에 대해 가비지 콜렉션을 수행

- 최신 브라우저는 가비지 콜렉션에서 mark-and-sweep을 사용한다.

- 장점
  - 순환 참조가 더 이상 문제가 되지않음

- 단점
  - 어떤 메모리를 언제 해제할 지에 대해 수동으로 결정하는게 편할 수 있다.
  - 수동으로 객체의 메모리를 해제하려면 객체 메모리에 도달 할 수 없도록 명시하는 기능이 있어야함

- 현재
  - 명시적으로 또는 프로그래밍 방식으로 가비지 컬렉션을 작동할 수 없음
  